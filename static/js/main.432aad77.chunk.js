(this["webpackJsonpticker-tape-parade"]=this["webpackJsonpticker-tape-parade"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=(n(14),n(5)),u=n.n(i),l=(n(15),n(7)),s=n(2),f=n(6),m=n(8),p=n(1);function d(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),r=Object(p.a)(n,2),c=r[0],o=r[1];return[c,function(t){try{var n=t instanceof Function?t(c):t;o(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}var b=function(){var e=d("finnhub-token",""),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(p.a)(o,2),u=i[0],l=i[1];return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(v,{token:n}):r.a.createElement("form",{onSubmit:function(e){e.stopPropagation(),e.preventDefault(),c(u)}},r.a.createElement("code",null,"Please enter API token from finnhub.io"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",onChange:function(e){return l(e.target.value)},value:u})))},v=function(e){var t=e.token,n=Object(a.useState)(),c=Object(p.a)(n,2),o=c[0],i=c[1],u=d("tickers-list",[]),b=Object(p.a)(u,2),v=b[0],g=b[1],E=Object(a.useState)({}),h=Object(p.a)(E,2),O=h[0],j=h[1];Object(a.useEffect)((function(){var e=new WebSocket("wss://ws.finnhub.io?token=".concat(t));return e.addEventListener("open",(function(){i(e)})),e.addEventListener("message",(function(e){var t=JSON.parse(e.data);if("trade"===t.type)for(var n=function(e){var n=t.data[e],a=n.s,r=Object(m.a)(n,["s"]);j((function(e){return Object(f.a)({},e,Object(s.a)({},a,null===r||void 0===r?void 0:r.p))}))},a=0;a<t.data.length;a++)n(a)})),function(){return e.close()}}),[t]);var y=Object(a.useRef)(new Set);Object(a.useEffect)((function(){o&&(v.forEach((function(e){y.current.has(e)||(o.send(JSON.stringify({type:"subscribe",symbol:e})),y.current.add(e))})),Array.from(y.current.values()).forEach((function(e){v.includes(e)||(o.send(JSON.stringify({type:"unsubscribe",symbol:e})),y.current.delete(e))})))}),[v,o]);var k=Object(a.useState)(""),w=Object(p.a)(k,2),S=w[0],N=w[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.stopPropagation(),e.preventDefault(),S&&!v.includes(S)&&g([].concat(Object(l.a)(v),[S])),N("")}},r.a.createElement("input",{type:"text",onChange:function(e){return N(e.target.value)},value:S,placeholder:"Enter ticker symbol"})),r.a.createElement("ul",null,v.map((function(e){return r.a.createElement("li",{key:e},e," ",e in O?O[e]:"..."," ",r.a.createElement("a",{onClick:function(){g(v.filter((function(t){return t!==e})))}},"X"))}))))};var g=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),r.a.createElement(b,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.432aad77.chunk.js.map